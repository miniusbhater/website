<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>miniusbhater's website :3</title>
    <link rel="stylesheet" href="/style.css">
     <link rel="icon" href="/images/favicon.png">
</head>
<body>
    <header>        
        <nav>
            <ul>
             <li><img height="64px" width="64px" src="/images/favicon.png"></li>
            <li><a href="/home/" style="font-size: 25px;">Home</a></li>
            <li><a href="/mystuff/" style="font-size: 25px;">My stuff</a></li>
            <li><a href="/contact/" style="font-size: 25px;">Contact</a></li>
            </ul>
        </nav>
       
    </header>
   <main>
  <div class="text-container-mystuff">
    <h1 style="font-size: 4rem;">Minecraft server status</h1>
     <h1 id="mc-status">Checking status</h1>
     <br>
     <br>
     <pre id="status-server"></pre>

  </div>     
</main>
<script>
  async function updateStatus() {
    try {
      const res = await fetch('https://mcapi.us/server/status?ip=mc.miniusbhater.uk&port=25565');
      const data = await res.json();
      if (data.online){
        document.getElementById('mc-status').innerHTML = `Online: ${data.players.now}/${data.players.max} players<br>Version: ${data.server.name}`;
       } 
      else {
        document.getElementById('mc-status').textContent = 'Offline';
      }
    } catch (err) {
      document.getElementById('mc-status').textContent = 'Error getting status';
    }
  }

  updateStatus();
  setInterval(updateStatus, 30000);
</script>

<script>
  fetch('/minecraft/status/status.txt')
    .then(response => response.text())
    .then(text => {document.getElementById('status-server').textContent = text;});
</script>

</body>
</html>
